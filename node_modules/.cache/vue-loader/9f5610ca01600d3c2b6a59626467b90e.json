{"remainingRequest":"/Users/apple/Desktop/qz/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/apple/Desktop/qz/src/views/FindPassword.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/apple/Desktop/qz/src/views/FindPassword.vue","mtime":1569477177309},{"path":"/Users/apple/Desktop/qz/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/apple/Desktop/qz/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/apple/Desktop/qz/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n//qz_login.less\nimport common from '@/utils/common'\nimport Headers from '@/components/Headers'\nimport { GET_CAPTCHA } from '@/store/actions.type'\nimport signJs from '@/utils/sign'\nimport { constants } from 'crypto'\n// import ApiService from '@/service/api.service'\nexport default {\n  name: 'findPassword',\n  components: { Headers },\n  data() {\n    return {\n      setTitle: '找回密码',\n      codeShow: true,\n      TIME_COUNT: 0,\n      timer: 0,\n      count: 0,\n      user: {\n        token: '',\n        userType: 3,\n        cellPhone: '',\n        type: '103' //短信模板类型：101：注册;102：登录；103：找回密码/支付密码；105:注册成功;106:修改手机绑定;110:微信绑定手机号\n      }\n    }\n  },\n  mounted() {\n    this.getCode1()\n  },\n  methods: {\n    viewDefault: function() {\n      window.scroll(0, 0)\n    },\n    getCode1() {\n      const script = document.createElement('script')\n      script.src = `https://cdn.dingxiang-inc.com/ctu-group/captcha-ui/index.js`\n      script.language = 'JavaScript'\n      document.body.appendChild(script)\n    },\n    getMyCode() {\n      let _this = this\n      if (_this.user.cellPhone == '') {\n        _this.$toast('请输入手机号')\n      } else {\n        common.validatePhoneNum(_this.user.cellPhone)\n        const myCaptcha = _dx.Captcha(document.getElementById('ic'), {\n          appId: '7035b7125c0596a0ee719ef95e3f5f30',\n          type: 'basic',\n          style: 'popup',\n          success: function(token) {\n            common.getCode(_this)\n            // console.log('token:', token) //这里是通过第三方获取的token 可以打印出token的值\n            let data = {\n              cellPhone: _this.user.cellPhone,\n              type: parseInt(_this.user.type),\n              token: token\n            }\n            // console.log('token:', token) //这里也可以打印出token的值\n            let params = signJs.miscellaneous.signedParams(data)\n            _this.$axios\n              .get(\n                `${'/common/getmsAuthCode'}?cellPhone=${\n                  params.cellPhone\n                }&type=${params.type}&sign=${params.sign}&token=${token}`,\n                {},\n                {\n                  headers: {\n                    'Content-Type': 'application/json',\n                    token: token //这里是拼接地址传的token\n                  }\n                }\n              )\n              .then(res => {\n                // console.log(res)\n                if (res.data.status == 'OK') {\n                  // console.log(res)\n                }\n              })\n              .catch(error => {\n                // console.log(error)\n              })\n          }\n        })\n        myCaptcha.show()\n      }\n    },\n    submit() {\n      let _this = this\n      let data = {\n        // authCode: \"1111\",\n        authCode: (_this.user.code).toString(),\n        cellPhone: _this.user.cellPhone,\n        passWord: _this.user.pwdInput,\n        userType: _this.user.userType\n      }\n\n      if (!common.validatePhoneNum(_this.user.cellPhone)) {\n        _this.$toast('请输入正确的手机号码')\n      } else if (!_this.user.code) {\n        _this.$toast('验证码不能为空')\n      } else if (!_this.user.pwdInput) {\n        _this.$toast('密码不能为空')\n      } else if (common.isNumberOr(_this.user.pwdInput)) {\n        // _this.$toast('密码格式不正确')\n        // console.log(_this.user.pwdInput)\n        console.log(common.isNumberOr(_this.user.pwdInput))\n      } else {\n        _this.$axios\n          .post(\n            'user/resetPassWord',\n            signJs.miscellaneous.signedParams(data)\n          )\n          .then(res => {\n            // console.log(res)\n            if (res.data.status == 'OK') {\n            _this.$router.push('/')\n            } else {\n              _this.$toast('res.data.message')\n            }\n          })\n      }\n    }\n  }\n}\n",{"version":3,"sources":["FindPassword.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"FindPassword.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div>\n    <headers :setTitle=\"setTitle\"></headers>\n    <div class=\"qz_boxs qz_topBor\">\n      <div class=\"qz_login_box\">\n        <div class=\"qz_login_list\">\n          <input\n            type=\"tel\"\n            placeholder=\"请输入手机号\"\n            v-model=\"user.cellPhone\"\n            oninput=\"if(value.length>11)value=value.slice(0,11)\"\n          />\n        </div>\n        <div class=\"qz_login_list qz_login_list2\">\n          <input type=\"tel\" placeholder=\"请输入验证码\" v-model=\"user.code\" />\n          <span @click=\"getMyCode\" v-show=\"codeShow\">获取验证码</span>\n          <span v-show=\"!codeShow\">{{count}}&nbsp;s</span>\n          <div id=\"ic\"></div>\n        </div>\n        <div class=\"qz_login_list\">\n          <input\n            v-model=\"user.pwdInput\"\n            oninput=\"if(value.length>6)value=value.slice(0,20)\"\n            type=\"password\"\n            placeholder=\"请输入新密码（最少6位字符，数字+字母）\"\n          />\n        </div>\n      </div>\n      <div class=\"qz_login_btns\" @click=\"submit\">提交</div>\n    </div>\n  </div>\n</template>\n<script>\n//qz_login.less\nimport common from '@/utils/common'\nimport Headers from '@/components/Headers'\nimport { GET_CAPTCHA } from '@/store/actions.type'\nimport signJs from '@/utils/sign'\nimport { constants } from 'crypto'\n// import ApiService from '@/service/api.service'\nexport default {\n  name: 'findPassword',\n  components: { Headers },\n  data() {\n    return {\n      setTitle: '找回密码',\n      codeShow: true,\n      TIME_COUNT: 0,\n      timer: 0,\n      count: 0,\n      user: {\n        token: '',\n        userType: 3,\n        cellPhone: '',\n        type: '103' //短信模板类型：101：注册;102：登录；103：找回密码/支付密码；105:注册成功;106:修改手机绑定;110:微信绑定手机号\n      }\n    }\n  },\n  mounted() {\n    this.getCode1()\n  },\n  methods: {\n    viewDefault: function() {\n      window.scroll(0, 0)\n    },\n    getCode1() {\n      const script = document.createElement('script')\n      script.src = `https://cdn.dingxiang-inc.com/ctu-group/captcha-ui/index.js`\n      script.language = 'JavaScript'\n      document.body.appendChild(script)\n    },\n    getMyCode() {\n      let _this = this\n      if (_this.user.cellPhone == '') {\n        _this.$toast('请输入手机号')\n      } else {\n        common.validatePhoneNum(_this.user.cellPhone)\n        const myCaptcha = _dx.Captcha(document.getElementById('ic'), {\n          appId: '7035b7125c0596a0ee719ef95e3f5f30',\n          type: 'basic',\n          style: 'popup',\n          success: function(token) {\n            common.getCode(_this)\n            // console.log('token:', token) //这里是通过第三方获取的token 可以打印出token的值\n            let data = {\n              cellPhone: _this.user.cellPhone,\n              type: parseInt(_this.user.type),\n              token: token\n            }\n            // console.log('token:', token) //这里也可以打印出token的值\n            let params = signJs.miscellaneous.signedParams(data)\n            _this.$axios\n              .get(\n                `${'/common/getmsAuthCode'}?cellPhone=${\n                  params.cellPhone\n                }&type=${params.type}&sign=${params.sign}&token=${token}`,\n                {},\n                {\n                  headers: {\n                    'Content-Type': 'application/json',\n                    token: token //这里是拼接地址传的token\n                  }\n                }\n              )\n              .then(res => {\n                // console.log(res)\n                if (res.data.status == 'OK') {\n                  // console.log(res)\n                }\n              })\n              .catch(error => {\n                // console.log(error)\n              })\n          }\n        })\n        myCaptcha.show()\n      }\n    },\n    submit() {\n      let _this = this\n      let data = {\n        // authCode: \"1111\",\n        authCode: (_this.user.code).toString(),\n        cellPhone: _this.user.cellPhone,\n        passWord: _this.user.pwdInput,\n        userType: _this.user.userType\n      }\n\n      if (!common.validatePhoneNum(_this.user.cellPhone)) {\n        _this.$toast('请输入正确的手机号码')\n      } else if (!_this.user.code) {\n        _this.$toast('验证码不能为空')\n      } else if (!_this.user.pwdInput) {\n        _this.$toast('密码不能为空')\n      } else if (common.isNumberOr(_this.user.pwdInput)) {\n        // _this.$toast('密码格式不正确')\n        // console.log(_this.user.pwdInput)\n        console.log(common.isNumberOr(_this.user.pwdInput))\n      } else {\n        _this.$axios\n          .post(\n            'user/resetPassWord',\n            signJs.miscellaneous.signedParams(data)\n          )\n          .then(res => {\n            // console.log(res)\n            if (res.data.status == 'OK') {\n            _this.$router.push('/')\n            } else {\n              _this.$toast('res.data.message')\n            }\n          })\n      }\n    }\n  }\n}\n</script>\n\n<style scoped>\n</style>\n"]}]}