{"remainingRequest":"/Users/apple/Desktop/qz/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/apple/Desktop/qz/src/views/Cash.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/apple/Desktop/qz/src/views/Cash.vue","mtime":1569475970612},{"path":"/Users/apple/Desktop/qz/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/apple/Desktop/qz/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/apple/Desktop/qz/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/apple/Desktop/qz/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n//qz_cash.less\nimport { mapGetters } from \"vuex\";\nimport { GET_WITHDRAWCASH } from \"@/store/actions.type\";\nimport Headers from \"@/components/Headers\";\nimport signJs from \"@/utils/sign\";\nimport { Dialog,Toast } from 'vant';\nexport default {\n  name: \"cash\",\n  components: { Headers },\n  data() {\n    return {\n      setTitle: \"提现\",\n      pwShow:false,\n      showKeyboard: false,\n      value:''\n    };\n  },\n  watch: {\n    error() {\n      const { error } = this;\n      if (error && error.length) {\n        this.$toast(\"error\");\n      }\n    },\n    value(newVal) {\n        if (newVal.length === 6) {\n            Toast.loading({\n                mask: true,\n                message: \"提交中...\"\n            })\n            const {userCode,cellPhone,aliAccount,aliUserName,withdrawAmount} = this.user;\n            let config = {userCode,aliUserName,aliAccount,withdrawAmount,cellPhone,payPassWord:newVal};\n            config = signJs.miscellaneous.signedParams(config);\n            this.$store\n              .dispatch(GET_WITHDRAWCASH, config)\n              .then((res) => {\n                  Toast.clear()\n                  console.log(\"res:\",res)\n                  if(res.status=='OK'){\n                      this.$router.push(\"/success?withdrawAmount=\"+withdrawAmount)\n                  }else{\n                      this.pwShow=false\n                      this.showKeyboard=false\n                      this.value=''\n                      Toast(res.message);\n                      // this.$router.push(\"/success?isTrue=0\")\n                  }\n              })\n              .catch(data => {\n                  Toast(data.message);\n                  this.pwShow=false\n                  this.showKeyboard=false\n                  this.value=''\n                  console.log(data);\n              });\n        }\n    }\n  },\n  computed: mapGetters([\"user\", \"error\"]),\n  methods: {\n    withdrawCash() {\n      if(!this.user.aliAccount){\n          Toast('请输入支付宝账号！');\n          return\n      }\n      if(!this.user.aliUserName){\n          Toast('请输入支付宝真实姓名！');\n          return\n      }\n      if(!this.user.withdrawAmount){\n          Toast('请输入提现金额！');\n          return\n      }\n      if(this.user.withdrawAmount>this.user.accountAmount){\n          Toast('提现金额超出可提现余额了！');\n          return\n      }\n      const router = this.$router;\n      //检查用户有没有设置支付密码\n      if (!this.user.isSettingPayPw) {\n        Dialog.confirm({\n          title: \"提现失败\",\n          message: \"您尚未设置支付密码，是否前去设置\"\n        })\n          .then(() => {\n            // on confirm\n            console.log(router)\n            router.push('/setPayPw')\n          })\n          .catch(() => {\n            // on cancel\n          });\n        return;\n      }\n      this.pwShow=true\n    },\n    onInput(key) {\n        this.value = (this.value + key).slice(0, 6);\n    },\n    onDelete() {\n        this.value = this.value.slice(0, this.value.length - 1);\n    },\n      ShowKeys(){\n        this.pwShow=true\n        this.showKeyboard=true\n      }\n  },\n  created() {\n      console.log(\"payPw:\",this.user.isSettingPayPw)\n      console.log(\"user:\",this.user)\n  }\n};\n",{"version":3,"sources":["Cash.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Cash.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div>\n    <headers :setTitle=\"setTitle\"></headers>\n    <div class=\"qz_boxs qz_topBor\">\n      <div class=\"qz_cash_list\">\n        <label></label>\n        <input type=\"text\" placeholder=\"请输入支付宝账号\" v-model=\"user.aliAccount\" />\n        <!-- <span>更改支付宝账号</span> -->\n      </div>\n      <div class=\"qz_cash_list\">\n        <input type=\"text\" placeholder=\"请输入支付宝真实姓名\" v-model=\"user.aliUserName\" />\n      </div>\n      <div class=\"qz_cash_list\">\n        <b>￥</b>\n        <input type=\"number\" placeholder=\"请输入提现金额\" v-model=\"user.withdrawAmount\" />\n      </div>\n      <div class=\"qz_cash_tips\" v-cloak>可提现余额¥{{user.accountAmount}}</div>\n      <div class=\"qz_cash_btns\" @click=\"withdrawCash\">确认提现</div>\n    </div>\n\n    <van-popup v-model=\"pwShow\" closeable :style=\"{width:'80%'}\">\n        <h2 class=\"pwPop_tit\">支付密码</h2>\n        <!-- 密码输入框 -->\n        <van-password-input\n            :value=\"value\"\n            info=\"\"\n            :focused=\"showKeyboard\"\n            @focus=\"ShowKeys\"\n        />\n        <router-link to=\"/findPayPw\" tag=\"a\" class=\"pwPop_links\">忘记密码？</router-link>\n    </van-popup>\n    <!-- 数字键盘 -->\n    <van-number-keyboard\n        :show=\"showKeyboard\"\n        @input=\"onInput\"\n        @delete=\"onDelete\"\n        @blur=\"showKeyboard = false\"\n        :zIndex=\"3002\"\n    />\n\n  </div>\n</template>\n\n<script>\n//qz_cash.less\nimport { mapGetters } from \"vuex\";\nimport { GET_WITHDRAWCASH } from \"@/store/actions.type\";\nimport Headers from \"@/components/Headers\";\nimport signJs from \"@/utils/sign\";\nimport { Dialog,Toast } from 'vant';\nexport default {\n  name: \"cash\",\n  components: { Headers },\n  data() {\n    return {\n      setTitle: \"提现\",\n      pwShow:false,\n      showKeyboard: false,\n      value:''\n    };\n  },\n  watch: {\n    error() {\n      const { error } = this;\n      if (error && error.length) {\n        this.$toast(\"error\");\n      }\n    },\n    value(newVal) {\n        if (newVal.length === 6) {\n            Toast.loading({\n                mask: true,\n                message: \"提交中...\"\n            })\n            const {userCode,cellPhone,aliAccount,aliUserName,withdrawAmount} = this.user;\n            let config = {userCode,aliUserName,aliAccount,withdrawAmount,cellPhone,payPassWord:newVal};\n            config = signJs.miscellaneous.signedParams(config);\n            this.$store\n              .dispatch(GET_WITHDRAWCASH, config)\n              .then((res) => {\n                  Toast.clear()\n                  console.log(\"res:\",res)\n                  if(res.status=='OK'){\n                      this.$router.push(\"/success?withdrawAmount=\"+withdrawAmount)\n                  }else{\n                      this.pwShow=false\n                      this.showKeyboard=false\n                      this.value=''\n                      Toast(res.message);\n                      // this.$router.push(\"/success?isTrue=0\")\n                  }\n              })\n              .catch(data => {\n                  Toast(data.message);\n                  this.pwShow=false\n                  this.showKeyboard=false\n                  this.value=''\n                  console.log(data);\n              });\n        }\n    }\n  },\n  computed: mapGetters([\"user\", \"error\"]),\n  methods: {\n    withdrawCash() {\n      if(!this.user.aliAccount){\n          Toast('请输入支付宝账号！');\n          return\n      }\n      if(!this.user.aliUserName){\n          Toast('请输入支付宝真实姓名！');\n          return\n      }\n      if(!this.user.withdrawAmount){\n          Toast('请输入提现金额！');\n          return\n      }\n      if(this.user.withdrawAmount>this.user.accountAmount){\n          Toast('提现金额超出可提现余额了！');\n          return\n      }\n      const router = this.$router;\n      //检查用户有没有设置支付密码\n      if (!this.user.isSettingPayPw) {\n        Dialog.confirm({\n          title: \"提现失败\",\n          message: \"您尚未设置支付密码，是否前去设置\"\n        })\n          .then(() => {\n            // on confirm\n            console.log(router)\n            router.push('/setPayPw')\n          })\n          .catch(() => {\n            // on cancel\n          });\n        return;\n      }\n      this.pwShow=true\n    },\n    onInput(key) {\n        this.value = (this.value + key).slice(0, 6);\n    },\n    onDelete() {\n        this.value = this.value.slice(0, this.value.length - 1);\n    },\n      ShowKeys(){\n        this.pwShow=true\n        this.showKeyboard=true\n      }\n  },\n  created() {\n      console.log(\"payPw:\",this.user.isSettingPayPw)\n      console.log(\"user:\",this.user)\n  }\n};\n</script>\n\n"]}]}