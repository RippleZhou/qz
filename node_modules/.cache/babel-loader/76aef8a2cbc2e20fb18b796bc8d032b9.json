{"remainingRequest":"/Users/apple/Desktop/qz/node_modules/babel-loader/lib/index.js!/Users/apple/Desktop/qz/node_modules/eslint-loader/index.js??ref--13-0!/Users/apple/Desktop/qz/src/store/auth.module.js","dependencies":[{"path":"/Users/apple/Desktop/qz/src/store/auth.module.js","mtime":1569475970609},{"path":"/Users/apple/Desktop/qz/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/apple/Desktop/qz/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/apple/Desktop/qz/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _defineProperty from \"/Users/apple/Desktop/qz/node_modules/@babel/runtime-corejs2/helpers/esm/defineProperty\";\n\nvar _actions, _mutations;\n\nimport { SIGN_IN, GET_USERPAYPW, GET_PAY_PW, PASSWORD_RESET, GET_STOREACCOUNTINFO, GET_CAPTCHA, GET_MODIFY_PAY_PW } from \"./actions.type\";\nimport { SET_USERPAYPW, SET_AUTH, SET_ERROR, CLEAR_ERROR } from \"./mutations.type\";\nimport ApiService from \"@/service/api.service\";\nexport var state = {\n  isLogin: false,\n  user: null,\n  error: null,\n  payPw: null\n};\nexport var getters = {\n  user: function user(state) {\n    return state.user;\n  },\n  error: function error(state) {\n    return state.error;\n  },\n  payPw: function payPw(state) {\n    return state.payPw;\n  }\n};\nexport var actions = (_actions = {}, _defineProperty(_actions, SIGN_IN, function (_ref, credentials) {\n  var commit = _ref.commit;\n  return new Promise(function (resolve) {\n    ApiService.post(\"/user/login\", credentials).then(function (_ref2) {\n      var data = _ref2.data;\n\n      if (data.status === \"OK\") {\n        console.log(data);\n        var storeId = data.message.storeId;\n        var userInfo = Object.assign({}, data.message, {\n          sign: data.params.sign\n        });\n        commit(SET_AUTH, userInfo, storeId);\n        resolve(data);\n      }\n    }).catch(function (_ref3) {\n      var data = _ref3.data;\n      console.log(data);\n      commit(SET_ERROR);\n    });\n  });\n}), _defineProperty(_actions, GET_STOREACCOUNTINFO, function (_ref4, credentials) {\n  var commit = _ref4.commit,\n      state = _ref4.state;\n  return new Promise(function (resolve) {\n    ApiService.post(\"/district/getMyAccountInfo\", credentials).then(function (_ref5) {\n      var data = _ref5.data;\n\n      if (data.status === \"OK\") {\n        var userInfo = state.user;\n        userInfo.accountAmount = data.message.accountAmount;\n        commit(SET_AUTH, userInfo);\n        console.log(\"getMyAccountInfo:\", data);\n        resolve(data);\n      }\n    }).catch(function (_ref6) {\n      var data = _ref6.data;\n      console.log(\"getMyAccountInfo-Error\", data);\n      commit(SET_ERROR);\n    });\n  });\n}), _defineProperty(_actions, GET_CAPTCHA, function (_ref7, credentials) {\n  var commit = _ref7.commit;\n  ApiService.get('/public/getmsAuthCode', credentials).then(function (_ref8) {\n    var data = _ref8.data;\n\n    if (data.status === \"OK\") {\n      console.log(data);\n    }\n  }).catch(function (_ref9) {\n    var data = _ref9.data;\n    console.log(data);\n    commit(SET_ERROR);\n  });\n}), _defineProperty(_actions, GET_USERPAYPW, function (_ref10, credentials) {\n  var commit = _ref10.commit;\n  ApiService.post(\"/user/getUserPayPw\", credentials).then(function (_ref11) {\n    var data = _ref11.data;\n\n    if (data.status === \"OK\") {\n      console.log(\"GET_USERPAYPW:\", data);\n    }\n  }).catch(function (_ref12) {\n    var data = _ref12.data;\n    console.log(data);\n    commit(SET_ERROR);\n  });\n}), _defineProperty(_actions, GET_PAY_PW, function (_ref13, credentials) {\n  var commit = _ref13.commit;\n  return ApiService.post('/user/saveUserPayPw', credentials).then(function (_ref14) {\n    var data = _ref14.data;\n\n    if (data.status == \"OK\") {\n      var userInfo = Object.assign({}, data.message, {\n        sign: data.params.sign\n      });\n      commit(SET_AUTH, userInfo);\n    }\n\n    return data;\n  });\n}), _defineProperty(_actions, GET_MODIFY_PAY_PW, function (_ref15, credentials) {\n  var commit = _ref15.commit;\n  return ApiService.post('/user/modifyWithdrawPassword', credentials).then(function (_ref16) {\n    var data = _ref16.data;\n\n    if (data.status == \"OK\") {// const userInfo = Object.assign({}, data.message, {\n      //     sign: data.params.sign\n      // });\n      // commit(SET_AUTH, userInfo);\n    }\n\n    return data;\n  });\n}), _actions);\nexport var mutations = (_mutations = {}, _defineProperty(_mutations, SET_AUTH, function (state, user) {\n  state.isLogin = true;\n  state.user = user;\n  localStorage.setItem(\"userInfo\", JSON.stringify(user));\n}), _defineProperty(_mutations, SET_ERROR, function (state, error) {\n  state.error = error.message;\n  console.log(error);\n}), _defineProperty(_mutations, CLEAR_ERROR, function (state) {\n  state.error = null;\n}), _mutations);\nexport default {\n  state: state,\n  getters: getters,\n  actions: actions,\n  mutations: mutations\n};",{"version":3,"sources":["/Users/apple/Desktop/qz/src/store/auth.module.js"],"names":["SIGN_IN","GET_USERPAYPW","GET_PAY_PW","PASSWORD_RESET","GET_STOREACCOUNTINFO","GET_CAPTCHA","GET_MODIFY_PAY_PW","SET_USERPAYPW","SET_AUTH","SET_ERROR","CLEAR_ERROR","ApiService","state","isLogin","user","error","payPw","getters","actions","credentials","commit","Promise","resolve","post","then","data","status","console","log","storeId","message","userInfo","Object","assign","sign","params","catch","accountAmount","get","mutations","localStorage","setItem","JSON","stringify"],"mappings":"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","sourcesContent":["import {\n  SIGN_IN,\n  GET_USERPAYPW,\n  GET_PAY_PW,\n  PASSWORD_RESET,\n  GET_STOREACCOUNTINFO,\n  GET_CAPTCHA,\n  GET_MODIFY_PAY_PW\n} from \"./actions.type\";\nimport {\n  SET_USERPAYPW,\n  SET_AUTH,\n  SET_ERROR,\n  CLEAR_ERROR\n} from \"./mutations.type\";\nimport ApiService from \"@/service/api.service\";\n\nexport const state = {\n  isLogin: false,\n  user: null,\n  error: null,\n  payPw: null\n};\n\nexport const getters = {\n  user(state) {\n    return state.user;\n  },\n  error(state) {\n    return state.error;\n  },\n  payPw(state) {\n    return state.payPw;\n  }\n};\n\nexport const actions = {\n  //登录\n  [SIGN_IN]({\n    commit\n  }, credentials) {\n    return new Promise(resolve => {\n      ApiService.post(\"/user/login\", credentials)\n        .then(({\n          data\n        }) => {\n          if (data.status === \"OK\") {\n            console.log(data);\n            const storeId = data.message.storeId\n            const userInfo = Object.assign({}, data.message, {\n              sign: data.params.sign\n            });\n            commit(SET_AUTH, userInfo, storeId);\n            resolve(data);\n          }\n        })\n        .catch(({\n          data\n        }) => {\n          console.log(data)\n          commit(SET_ERROR);\n        });\n    });\n  },\n  //账户信息\n  [GET_STOREACCOUNTINFO]({\n    commit,state\n  }, credentials) {\n      return new Promise(resolve => {\n          ApiService.post(\"/district/getMyAccountInfo\", credentials)\n              .then(({data}) => {\n                  if (data.status === \"OK\") {\n                      const userInfo = state.user\n                      userInfo.accountAmount =data.message.accountAmount\n                      commit(SET_AUTH, userInfo);\n                      console.log(\"getMyAccountInfo:\",data);\n                      resolve(data);\n                  }\n              })\n              .catch(({data}) => {\n                  console.log(\"getMyAccountInfo-Error\",data)\n                  commit(SET_ERROR);\n           });\n      })\n  },\n  //忘记密码\n  [GET_CAPTCHA]({\n    commit\n  }, credentials) {\n    ApiService.get('/public/getmsAuthCode', credentials).then(({\n      data\n    }) => {\n      if (data.status === \"OK\") {\n        console.log(data);\n      }\n    }).catch(({\n      data\n    }) => {\n      console.log(data)\n      commit(SET_ERROR);\n    });\n  },\n  // 获取用户支付密码\n  [GET_USERPAYPW]({\n    commit\n  }, credentials) {\n    ApiService.post(\"/user/getUserPayPw\", credentials)\n      .then(({\n        data\n      }) => {\n        if (data.status === \"OK\") {\n          console.log(\"GET_USERPAYPW:\",data);\n        }\n      })\n      .catch(({\n        data\n      }) => {\n        console.log(data)\n        commit(SET_ERROR);\n      });\n  },\n  // 设置用户支付密码\n  [GET_PAY_PW]({commit},credentials){\n    return ApiService.post('/user/saveUserPayPw',credentials).then(({data})=>{\n      if(data.status==\"OK\"){\n          const userInfo = Object.assign({}, data.message, {\n              sign: data.params.sign\n          });\n          commit(SET_AUTH, userInfo);\n      }\n      return data\n    })\n  },\n  //修改支付密码\n  [GET_MODIFY_PAY_PW]({commit},credentials){\n      return ApiService.post('/user/modifyWithdrawPassword',credentials).then(({data})=>{\n          if(data.status==\"OK\"){\n              // const userInfo = Object.assign({}, data.message, {\n              //     sign: data.params.sign\n              // });\n              // commit(SET_AUTH, userInfo);\n          }\n          return data\n      })\n  },\n};\n\nexport const mutations = {\n  [SET_AUTH](state, user) {\n    state.isLogin = true;\n    state.user = user;\n    localStorage.setItem(\"userInfo\", JSON.stringify(user));\n  },\n  [SET_ERROR](state, error) {\n      state.error = error.message;\n      console.log(error)\n  },\n  [CLEAR_ERROR](state) {\n    state.error = null;\n  }\n};\n\nexport default {\n  state,\n  getters,\n  actions,\n  mutations\n};\n"]}]}