{"remainingRequest":"/Users/apple/Desktop/qz/node_modules/thread-loader/dist/cjs.js!/Users/apple/Desktop/qz/node_modules/babel-loader/lib/index.js!/Users/apple/Desktop/qz/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/apple/Desktop/qz/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/apple/Desktop/qz/src/views/Cash.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/apple/Desktop/qz/src/views/Cash.vue","mtime":1569475970612},{"path":"/Users/apple/Desktop/qz/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/apple/Desktop/qz/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/apple/Desktop/qz/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/apple/Desktop/qz/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/apple/Desktop/qz/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"vant/es/dialog/style\";\nimport _Dialog from \"vant/es/dialog\";\nimport \"vant/es/toast/style\";\nimport _Toast from \"vant/es/toast\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//qz_cash.less\nimport { mapGetters } from \"vuex\";\nimport { GET_WITHDRAWCASH } from \"@/store/actions.type\";\nimport Headers from \"@/components/Headers\";\nimport signJs from \"@/utils/sign\";\nexport default {\n  name: \"cash\",\n  components: {\n    Headers: Headers\n  },\n  data: function data() {\n    return {\n      setTitle: \"提现\",\n      pwShow: false,\n      showKeyboard: false,\n      value: ''\n    };\n  },\n  watch: {\n    error: function error() {\n      var error = this.error;\n\n      if (error && error.length) {\n        this.$toast(\"error\");\n      }\n    },\n    value: function value(newVal) {\n      var _this = this;\n\n      if (newVal.length === 6) {\n        _Toast.loading({\n          mask: true,\n          message: \"提交中...\"\n        });\n\n        var _this$user = this.user,\n            userCode = _this$user.userCode,\n            cellPhone = _this$user.cellPhone,\n            aliAccount = _this$user.aliAccount,\n            aliUserName = _this$user.aliUserName,\n            withdrawAmount = _this$user.withdrawAmount;\n        var config = {\n          userCode: userCode,\n          aliUserName: aliUserName,\n          aliAccount: aliAccount,\n          withdrawAmount: withdrawAmount,\n          cellPhone: cellPhone,\n          payPassWord: newVal\n        };\n        config = signJs.miscellaneous.signedParams(config);\n        this.$store.dispatch(GET_WITHDRAWCASH, config).then(function (res) {\n          _Toast.clear();\n\n          console.log(\"res:\", res);\n\n          if (res.status == 'OK') {\n            _this.$router.push(\"/success?withdrawAmount=\" + withdrawAmount);\n          } else {\n            _this.pwShow = false;\n            _this.showKeyboard = false;\n            _this.value = '';\n\n            _Toast(res.message); // this.$router.push(\"/success?isTrue=0\")\n\n          }\n        }).catch(function (data) {\n          _Toast(data.message);\n\n          _this.pwShow = false;\n          _this.showKeyboard = false;\n          _this.value = '';\n          console.log(data);\n        });\n      }\n    }\n  },\n  computed: mapGetters([\"user\", \"error\"]),\n  methods: {\n    withdrawCash: function withdrawCash() {\n      if (!this.user.aliAccount) {\n        _Toast('请输入支付宝账号！');\n\n        return;\n      }\n\n      if (!this.user.aliUserName) {\n        _Toast('请输入支付宝真实姓名！');\n\n        return;\n      }\n\n      if (!this.user.withdrawAmount) {\n        _Toast('请输入提现金额！');\n\n        return;\n      }\n\n      if (this.user.withdrawAmount > this.user.accountAmount) {\n        _Toast('提现金额超出可提现余额了！');\n\n        return;\n      }\n\n      var router = this.$router; //检查用户有没有设置支付密码\n\n      if (!this.user.isSettingPayPw) {\n        _Dialog.confirm({\n          title: \"提现失败\",\n          message: \"您尚未设置支付密码，是否前去设置\"\n        }).then(function () {\n          // on confirm\n          console.log(router);\n          router.push('/setPayPw');\n        }).catch(function () {// on cancel\n        });\n\n        return;\n      }\n\n      this.pwShow = true;\n    },\n    onInput: function onInput(key) {\n      this.value = (this.value + key).slice(0, 6);\n    },\n    onDelete: function onDelete() {\n      this.value = this.value.slice(0, this.value.length - 1);\n    },\n    ShowKeys: function ShowKeys() {\n      this.pwShow = true;\n      this.showKeyboard = true;\n    }\n  },\n  created: function created() {\n    console.log(\"payPw:\", this.user.isSettingPayPw);\n    console.log(\"user:\", this.user);\n  }\n};",{"version":3,"sources":["Cash.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div>\n    <headers :setTitle=\"setTitle\"></headers>\n    <div class=\"qz_boxs qz_topBor\">\n      <div class=\"qz_cash_list\">\n        <label></label>\n        <input type=\"text\" placeholder=\"请输入支付宝账号\" v-model=\"user.aliAccount\" />\n        <!-- <span>更改支付宝账号</span> -->\n      </div>\n      <div class=\"qz_cash_list\">\n        <input type=\"text\" placeholder=\"请输入支付宝真实姓名\" v-model=\"user.aliUserName\" />\n      </div>\n      <div class=\"qz_cash_list\">\n        <b>￥</b>\n        <input type=\"number\" placeholder=\"请输入提现金额\" v-model=\"user.withdrawAmount\" />\n      </div>\n      <div class=\"qz_cash_tips\" v-cloak>可提现余额¥{{user.accountAmount}}</div>\n      <div class=\"qz_cash_btns\" @click=\"withdrawCash\">确认提现</div>\n    </div>\n\n    <van-popup v-model=\"pwShow\" closeable :style=\"{width:'80%'}\">\n        <h2 class=\"pwPop_tit\">支付密码</h2>\n        <!-- 密码输入框 -->\n        <van-password-input\n            :value=\"value\"\n            info=\"\"\n            :focused=\"showKeyboard\"\n            @focus=\"ShowKeys\"\n        />\n        <router-link to=\"/findPayPw\" tag=\"a\" class=\"pwPop_links\">忘记密码？</router-link>\n    </van-popup>\n    <!-- 数字键盘 -->\n    <van-number-keyboard\n        :show=\"showKeyboard\"\n        @input=\"onInput\"\n        @delete=\"onDelete\"\n        @blur=\"showKeyboard = false\"\n        :zIndex=\"3002\"\n    />\n\n  </div>\n</template>\n\n<script>\n//qz_cash.less\nimport { mapGetters } from \"vuex\";\nimport { GET_WITHDRAWCASH } from \"@/store/actions.type\";\nimport Headers from \"@/components/Headers\";\nimport signJs from \"@/utils/sign\";\nimport { Dialog,Toast } from 'vant';\nexport default {\n  name: \"cash\",\n  components: { Headers },\n  data() {\n    return {\n      setTitle: \"提现\",\n      pwShow:false,\n      showKeyboard: false,\n      value:''\n    };\n  },\n  watch: {\n    error() {\n      const { error } = this;\n      if (error && error.length) {\n        this.$toast(\"error\");\n      }\n    },\n    value(newVal) {\n        if (newVal.length === 6) {\n            Toast.loading({\n                mask: true,\n                message: \"提交中...\"\n            })\n            const {userCode,cellPhone,aliAccount,aliUserName,withdrawAmount} = this.user;\n            let config = {userCode,aliUserName,aliAccount,withdrawAmount,cellPhone,payPassWord:newVal};\n            config = signJs.miscellaneous.signedParams(config);\n            this.$store\n              .dispatch(GET_WITHDRAWCASH, config)\n              .then((res) => {\n                  Toast.clear()\n                  console.log(\"res:\",res)\n                  if(res.status=='OK'){\n                      this.$router.push(\"/success?withdrawAmount=\"+withdrawAmount)\n                  }else{\n                      this.pwShow=false\n                      this.showKeyboard=false\n                      this.value=''\n                      Toast(res.message);\n                      // this.$router.push(\"/success?isTrue=0\")\n                  }\n              })\n              .catch(data => {\n                  Toast(data.message);\n                  this.pwShow=false\n                  this.showKeyboard=false\n                  this.value=''\n                  console.log(data);\n              });\n        }\n    }\n  },\n  computed: mapGetters([\"user\", \"error\"]),\n  methods: {\n    withdrawCash() {\n      if(!this.user.aliAccount){\n          Toast('请输入支付宝账号！');\n          return\n      }\n      if(!this.user.aliUserName){\n          Toast('请输入支付宝真实姓名！');\n          return\n      }\n      if(!this.user.withdrawAmount){\n          Toast('请输入提现金额！');\n          return\n      }\n      if(this.user.withdrawAmount>this.user.accountAmount){\n          Toast('提现金额超出可提现余额了！');\n          return\n      }\n      const router = this.$router;\n      //检查用户有没有设置支付密码\n      if (!this.user.isSettingPayPw) {\n        Dialog.confirm({\n          title: \"提现失败\",\n          message: \"您尚未设置支付密码，是否前去设置\"\n        })\n          .then(() => {\n            // on confirm\n            console.log(router)\n            router.push('/setPayPw')\n          })\n          .catch(() => {\n            // on cancel\n          });\n        return;\n      }\n      this.pwShow=true\n    },\n    onInput(key) {\n        this.value = (this.value + key).slice(0, 6);\n    },\n    onDelete() {\n        this.value = this.value.slice(0, this.value.length - 1);\n    },\n      ShowKeys(){\n        this.pwShow=true\n        this.showKeyboard=true\n      }\n  },\n  created() {\n      console.log(\"payPw:\",this.user.isSettingPayPw)\n      console.log(\"user:\",this.user)\n  }\n};\n</script>\n\n"],"sourceRoot":"src/views"}]}