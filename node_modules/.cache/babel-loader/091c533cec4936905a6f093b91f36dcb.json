{"remainingRequest":"/Users/apple/Desktop/qz/node_modules/babel-loader/lib/index.js!/Users/apple/Desktop/qz/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/apple/Desktop/qz/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/apple/Desktop/qz/src/views/AccountDetails.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/apple/Desktop/qz/src/views/AccountDetails.vue","mtime":1569475970611},{"path":"/Users/apple/Desktop/qz/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/apple/Desktop/qz/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/apple/Desktop/qz/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/apple/Desktop/qz/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//qz_accountDetails.less\nimport { mapGetters } from 'vuex';\nimport { GET_INCOME, GET_WALLET } from '@/store/actions.type';\nimport signJs from '@/utils/sign';\nimport Headers from \"@/components/Headers\";\nimport AccountList from \"./AccountList\";\nexport default {\n  name: \"accountDetails\",\n  components: {\n    AccountList: AccountList,\n    Headers: Headers\n  },\n  data: function data() {\n    return {\n      userCode: '',\n      setTitle: '账户明细',\n      listTab: ['收支明细', '提现记录'],\n      tabType: 0,\n      items: [],\n      offset: 1\n    };\n  },\n  watch: {\n    error: function error() {\n      var error = this.error;\n\n      if (error && error.length) {\n        this.$toast('error');\n      }\n    }\n  },\n  computed: mapGetters(['user', 'error']),\n  mounted: function mounted() {},\n  methods: {\n    tabClick: function tabClick(index) {\n      if (this.tabType == index) return;\n      this.tabType = index;\n      this.items.splice(0, this.items.length);\n      this.offset = 1;\n\n      if (this.tabType) {\n        this.getWithdrawList();\n      } else {\n        this.getIncomeList();\n      }\n    },\n    getIncomeList: function getIncomeList() {\n      var _this2 = this;\n\n      var items = this.items;\n      var config = Object.assign({}, {\n        limit: 10,\n        userCode: this.userCode,\n        offset: this.offset\n      });\n      config = signJs.miscellaneous.signedParams(config);\n      this.$store.dispatch(GET_INCOME, config).then(function (res) {\n        console.log(\"收支列表：\", res);\n        var rows = res.rows;\n\n        if (rows.length) {\n          var newList = items.concat(rows);\n          _this2.items = newList;\n          console.log(\"收支items:\", _this2.items);\n        } else {\n          _this2.offset = -1;\n        }\n      });\n    },\n    getWithdrawList: function getWithdrawList() {\n      var _this3 = this;\n\n      var items = this.items;\n      var config = Object.assign({}, {\n        limit: 10,\n        userCode: this.userCode,\n        offset: this.offset\n      });\n      config = signJs.miscellaneous.signedParams(config);\n      this.$store.dispatch(GET_WALLET, config).then(function (res) {\n        console.log(\"提现列表：\", res);\n        var rows = res.rows;\n\n        if (rows.length) {\n          var newList = items.concat(rows);\n          _this3.items = newList;\n          console.log(\"提现items:\", _this3.items);\n        } else {\n          _this3.offset = -1;\n        }\n      });\n    }\n  },\n  created: function created() {\n    var _this = this;\n\n    var userCode = this.user.userCode;\n    this.userCode = userCode;\n    console.log(\"userCode\", this.userCode);\n\n    if (_this.tabType) {\n      _this.getWithdrawList();\n    } else {\n      _this.getIncomeList();\n    }\n\n    window.onscroll = function () {\n      var offset = _this.offset,\n          items = _this.items;\n      var scrollTop = document.documentElement.scrollTop || document.body.scrollTop;\n      var windowHeight = document.documentElement.clientHeight || document.body.clientHeight;\n      var scrollHeight = document.documentElement.scrollHeight || document.body.scrollHeight; // console.log(\"距--\" + scrollTop + \"--可视区高度--\" + windowHeight + \"--滚动条总高度--\" + scrollHeight);\n\n      if (scrollTop + windowHeight >= scrollHeight - 1) {\n        if (offset === -1 || !items.length) return;\n        _this.offset = Math.ceil(items.length / 10) * 10;\n\n        if (_this.tabType) {\n          _this.getWithdrawList();\n        } else {\n          _this.getIncomeList();\n        }\n\n        console.log(\"距顶部\" + scrollTop + \"可视区高度\" + windowHeight + \"滚动条总高度\" + scrollHeight);\n      }\n    };\n  }\n};",{"version":3,"sources":["AccountDetails.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"w_grayBgBox\">\n    <headers :setTitle=\"setTitle\"></headers>\n\n    <!--顶部分类-->\n    <div class=\"qz_detail_Tab\">\n      <div class=\"tab_txt\" v-for=\"(list,index) in listTab\" :key=\"index\" :class=\"tabType==index?'txt_active':''\" @click=\"tabClick(index)\">{{list}}</div>\n    </div>\n    <!--内容块-->\n    <div class=\"qz_detail_Cons\">\n      <account-list :items=\"items\" :setType=\"tabType\"></account-list>\n      <div class=\"noListTxt\" v-if=\"offset===-1\">没有更多了</div>\n    </div>\n\n  </div>\n</template>\n\n<script>\n    //qz_accountDetails.less\n    import { mapGetters } from 'vuex'\n    import { GET_INCOME,GET_WALLET} from '@/store/actions.type'\n    import signJs from '@/utils/sign'\n    import Headers from \"@/components/Headers\";\n    import AccountList from \"./AccountList\";\n    export default {\n      name: \"accountDetails\",\n      components: {AccountList, Headers},\n      data(){\n        return{\n          userCode:'',\n          setTitle:'账户明细',\n          listTab:['收支明细','提现记录'],\n          tabType:0,\n          items:[],\n          offset:1,\n        }\n      },\n      watch: {\n          error() {\n              const { error } = this\n              if (error && error.length) {\n                  this.$toast('error')\n              }\n          }\n      },\n      computed: mapGetters(['user', 'error']),\n      mounted(){\n\n      },\n      methods:{\n          tabClick(index){\n              if(this.tabType==index)return\n              this.tabType=index\n              this.items.splice(0,this.items.length);\n              this.offset=1\n              if(this.tabType){\n                  this.getWithdrawList()\n              }else{\n                  this.getIncomeList()\n              }\n          },\n          getIncomeList() {\n              const {items}=this\n              let config = Object.assign({},{limit: 10,userCode:this.userCode,offset:this.offset})\n              config = signJs.miscellaneous.signedParams(config)\n              this.$store.dispatch(GET_INCOME, config).then(res=>{\n                  console.log(\"收支列表：\",res)\n                  let rows=res.rows\n                  if (rows.length) {\n                      let newList = items.concat(rows);\n                      this.items = newList\n                      console.log(\"收支items:\",this.items)\n                  } else {\n                      this.offset = -1;\n                  }\n              })\n          },\n          getWithdrawList() {\n              const {items}=this\n              let config = Object.assign({},{limit: 10,userCode:this.userCode,offset:this.offset})\n              config = signJs.miscellaneous.signedParams(config)\n              this.$store.dispatch(GET_WALLET, config).then(res=>{\n                  console.log(\"提现列表：\",res)\n                  let rows=res.rows\n                  if (rows.length) {\n                      let newList = items.concat(rows);\n                      this.items = newList\n                      console.log(\"提现items:\",this.items)\n                  } else {\n                      this.offset = -1;\n                  }\n              })\n          },\n      },\n      created(){\n          let _this =this\n          const { userCode } = this.user\n          this.userCode=userCode\n          console.log(\"userCode\",this.userCode)\n          if(_this.tabType){\n              _this.getWithdrawList()\n          }else{\n              _this.getIncomeList()\n          }\n          window.onscroll = function () {\n              const {offset,items}=_this\n              let scrollTop = document.documentElement.scrollTop || document.body.scrollTop;\n              let windowHeight = document.documentElement.clientHeight || document.body.clientHeight;\n              let scrollHeight = document.documentElement.scrollHeight || document.body.scrollHeight;\n              // console.log(\"距--\" + scrollTop + \"--可视区高度--\" + windowHeight + \"--滚动条总高度--\" + scrollHeight);\n              if (scrollTop + windowHeight >= scrollHeight-1) {\n                  if (offset === -1||!items.length) return;\n                  _this.offset = Math.ceil(items.length / 10) * 10;\n                  if(_this.tabType){\n                      _this.getWithdrawList()\n                  }else{\n                      _this.getIncomeList()\n                  }\n                  console.log(\"距顶部\" + scrollTop + \"可视区高度\" + windowHeight + \"滚动条总高度\" + scrollHeight);\n              }\n          }\n\n      }\n    }\n</script>\n\n<style scoped>\n\n</style>\n"],"sourceRoot":"src/views"}]}